---
phase: 05-extract-en-keys
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/components/tools/workflow-submission-dialog.tsx
  - frontend/components/tools/workflow-detail-modal.tsx
  - frontend/messages/en.json
autonomous: true

must_haves:
  truths:
    - "workflow-submission-dialog.tsx uses useTranslations hook"
    - "workflow-detail-modal.tsx uses useTranslations hook"
    - "All hardcoded strings replaced with t() calls"
    - "English translations display correctly in UI"
  artifacts:
    - path: "frontend/components/tools/workflow-submission-dialog.tsx"
      provides: "Internationalized submission dialog"
      contains: "useTranslations"
    - path: "frontend/components/tools/workflow-detail-modal.tsx"
      provides: "Internationalized detail modal"
      contains: "useTranslations"
    - path: "frontend/messages/en.json"
      provides: "Tools.share.* and Tools.workflow.* message keys"
      contains: "share"
  key_links:
    - from: "frontend/components/tools/workflow-submission-dialog.tsx"
      to: "frontend/messages/en.json"
      via: "t() function calls"
      pattern: "t\\('share\\."
    - from: "frontend/components/tools/workflow-detail-modal.tsx"
      to: "frontend/messages/en.json"
      via: "t() function calls"
      pattern: "t\\('workflow\\."
---

<objective>
Internationalize the two Tool Registry components (workflow-submission-dialog.tsx and workflow-detail-modal.tsx) by extracting all hardcoded strings to message keys.

Purpose: Complete the i18n infrastructure for Tool Registry so FR/IT translations can be added in Phase 6.
Output: Both components using useTranslations hook, en.json containing ~25 new message keys under Tools.share.* and Tools.workflow.* namespaces.
</objective>

<execution_context>
@/Users/mmaudet/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mmaudet/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Reference pattern (already internationalized):
@frontend/components/tools/tool-install-modal.tsx

Target files:
@frontend/components/tools/workflow-submission-dialog.tsx
@frontend/components/tools/workflow-detail-modal.tsx
@frontend/messages/en.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Internationalize workflow-submission-dialog.tsx and add EN keys</name>
  <files>
    frontend/components/tools/workflow-submission-dialog.tsx
    frontend/messages/en.json
  </files>
  <action>
1. Add import for useTranslations from 'next-intl' at top of file
2. Add `const t = useTranslations('Tools');` at start of component function
3. Extract all hardcoded strings to Tools.share.* namespace keys:

| Hardcoded String | Key |
|------------------|-----|
| "Share Workflow to Registry" | share.title |
| "Your secrets never leave your network" | share.securityTitle |
| "Sanitization happens locally in your browser before submission. Credential IDs are nullified." | share.securityDescription |
| "Variables detected (will be parameterized):" | share.variablesDetected |
| "Credentials found and being parameterized:" | share.credentialsDetected |
| "Private network URLs (will be parameterized):" | share.privateUrlsDetected |
| "Submission failed" | share.submissionFailed |
| "Ready to submit!" | share.readyToSubmit |
| "Complete your submission in the form. If popup was blocked, click below:" | share.popupBlockedHint |
| "Open Submission Form" | share.openFormButton |
| "Close" | Use existing Common.close |
| "Cancel" | Use existing Common.cancel |
| "Preparing submission..." | share.preparingSubmission |
| "Continue to Submission Form" | share.continueButton |

4. Replace each hardcoded string with t('share.key') or tCommon('key') for common strings
5. Add useTranslations('Common') as tCommon for Close/Cancel buttons
6. Add all new keys to en.json under Tools.share namespace

Note: The arrow symbol " -> " in variable display hints is UI formatting, not translatable text.
  </action>
  <verify>
- `grep -c "useTranslations" frontend/components/tools/workflow-submission-dialog.tsx` returns 2 (Tools + Common)
- `grep "share\." frontend/messages/en.json | wc -l` returns at least 12 lines
- `pnpm lint` passes in frontend directory
- `pnpm build` succeeds (no missing translation keys)
  </verify>
  <done>
- workflow-submission-dialog.tsx imports and uses useTranslations('Tools') and useTranslations('Common')
- All hardcoded strings replaced with t() or tCommon() calls
- en.json contains Tools.share.* keys for all submission dialog strings
  </done>
</task>

<task type="auto">
  <name>Task 2: Internationalize workflow-detail-modal.tsx and add EN keys</name>
  <files>
    frontend/components/tools/workflow-detail-modal.tsx
    frontend/messages/en.json
  </files>
  <action>
1. Add import for useTranslations from 'next-intl' at top of file
2. Add `const t = useTranslations('Tools');` at start of component function
3. Extract all hardcoded strings to Tools.workflow.* namespace keys:

| Hardcoded String | Key |
|------------------|-----|
| "Custom Tool" | workflow.customToolLabel |
| "Status" | workflow.statusLabel |
| "Active" | workflow.statusActive |
| "Inactive" | workflow.statusInactive |
| "Tags" | workflow.tagsLabel |
| "Created" | workflow.createdLabel |
| "Last Updated" | workflow.lastUpdatedLabel |
| "n8n Workflow" | workflow.n8nWorkflowLabel |
| "This is a custom tool not published to the CAAL Tool Registry. Share it to help others discover and use this tool. All keys, ids, and private URLs will be stripped automatically." | workflow.unpublishedInfo |
| "Share to Registry" | workflow.shareButton |

4. Replace each hardcoded string with t('workflow.key')
5. Add all new keys to en.json under Tools.workflow namespace

Note: The workflow.name is dynamic data, not a translatable string.
  </action>
  <verify>
- `grep -c "useTranslations" frontend/components/tools/workflow-detail-modal.tsx` returns 1
- `grep "workflow\." frontend/messages/en.json | wc -l` returns at least 10 lines
- `pnpm lint` passes in frontend directory
- `pnpm build` succeeds (no missing translation keys)
  </verify>
  <done>
- workflow-detail-modal.tsx imports and uses useTranslations('Tools')
- All hardcoded strings replaced with t() calls
- en.json contains Tools.workflow.* keys for all detail modal strings
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. **Lint check:**
   ```bash
   cd frontend && pnpm lint
   ```

2. **Build check:**
   ```bash
   cd frontend && pnpm build
   ```

3. **No hardcoded strings remain:**
   ```bash
   # Should return no matches for English UI text
   grep -E '"(Share|Submit|Status|Active|Inactive|Tags|Created|Custom Tool)"' \
     frontend/components/tools/workflow-submission-dialog.tsx \
     frontend/components/tools/workflow-detail-modal.tsx
   ```

4. **Message keys exist:**
   ```bash
   grep -c '"share":' frontend/messages/en.json  # Should be 1
   grep -c '"workflow":' frontend/messages/en.json  # Should be 1
   ```
</verification>

<success_criteria>
1. workflow-submission-dialog.tsx imports and uses useTranslations('Tools')
2. workflow-detail-modal.tsx imports and uses useTranslations('Tools')
3. en.json contains Tools.share.* keys (~14 keys)
4. en.json contains Tools.workflow.* keys (~10 keys)
5. `pnpm build` succeeds with no errors
6. No hardcoded English strings remain in target components
</success_criteria>

<output>
After completion, create `.planning/phases/05-extract-en-keys/05-01-SUMMARY.md`
</output>
